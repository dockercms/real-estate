<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <!--＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
 * 文件名: EstateBrokerMapper.xml
 * 创建日期: 2020-03-20 11:01:19
 * 表名: estate_broker
 * Java文件目录: \src
 * 配置文件目录: \ss
 * 查询服务接口: main.iservice.IEstateBrokerSV
 * 查询服务实现: main.service.impl.EstateBrokerSVImpl
 * This comment is generated by IDE Plugin, do not modify.
 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝-->
 
<mapper namespace="com.ztuo.modules.house.dao.EstateBrokerDAO" >

  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <resultMap id="BaseResultMap" type="com.ztuo.modules.house.entity.EstateBroker" >
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="mobile_phone" property="mobilePhone" jdbcType="VARCHAR" />
    <result column="sign_password" property="signPassword" jdbcType="VARCHAR" />
    <result column="open_id" property="openId" jdbcType="VARCHAR" />
    <result column="device_type" property="deviceType" jdbcType="INTEGER" />
    <result column="device_token" property="deviceToken" jdbcType="VARCHAR" />
    <result column="area_code" property="areaCode" jdbcType="VARCHAR" />
    <result column="broker_name" property="brokerName" jdbcType="VARCHAR" />
    <result column="uygur_broker_name" property="uygurBrokerName" jdbcType="VARCHAR" />
    <result column="work_area" property="workArea" jdbcType="VARCHAR" />
    <result column="work_shop" property="workShop" jdbcType="VARCHAR" />
    <result column="broker_level" property="brokerLevel" jdbcType="INTEGER" />
    <result column="birth_date" property="birthDate" jdbcType="TIMESTAMP" />
    <result column="identity_number" property="identityNumber" jdbcType="VARCHAR" />
    <result column="home_address" property="homeAddress" jdbcType="VARCHAR" />
    <result column="photo_url" property="photoUrl" jdbcType="VARCHAR" />
    <result column="guest_number" property="guestNumber" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="audit_status" property="auditStatus" jdbcType="INTEGER" />
  </resultMap>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <sql id="Example_Where_Clause" >
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <sql id="Update_By_Example_Where_Clause" >
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <sql id="Base_Column_List" >
    id, <!-- id -->
    mobile_phone, <!-- 手机号 -->
    sign_password, <!-- 登陆密码 -->
    open_id, <!-- 微信openId -->
    device_type, <!-- 设备类型 0-ios 1-Android -->
    device_token, <!-- 设备标识 -->
    area_code, <!-- 区域标识 -->
    broker_name, <!-- 经纪人姓名 -->
    uygur_broker_name, <!-- 经纪人姓名维语 -->
    work_area, <!-- 工作区域 -->
    work_shop, <!-- 工作店铺 -->
    broker_level, <!-- 经纪人级别 0-初级 1-中级 2-高级 -->
    birth_date, <!-- 出生年月 -->
    identity_number, <!-- 身份证号 -->
    home_address, <!-- 家庭住址 -->
    photo_url, <!-- 证件照URL -->
    guest_number, <!-- 客源数量 -->
    create_time, <!-- 创建时间 -->
    audit_status  <!-- 审核状态 0-审核中 1-审核成功 2-审核失败 -->
  </sql>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <select id="getByExample" resultMap="BaseResultMap" parameterType="com.ztuo.modules.house.entity.EstateBrokerExample" >
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from estate_broker
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <select id="getByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select 
    <include refid="Base_Column_List" />
    from estate_broker
    where
      id = #{id,jdbcType=BIGINT}
  </select>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    delete from estate_broker
    where
      id = #{id,jdbcType=BIGINT}
  </delete>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <delete id="deleteByExample" parameterType="com.ztuo.modules.house.entity.EstateBrokerExample" >
    delete from estate_broker
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <insert id="save" useGeneratedKeys="true" keyProperty="id" keyColumn="id" parameterType="com.ztuo.modules.house.entity.EstateBroker" >
    insert into estate_broker (id, mobile_phone, sign_password, open_id, device_type, device_token, area_code, broker_name, uygur_broker_name, work_area, work_shop, broker_level, birth_date, identity_number, home_address, photo_url, guest_number, create_time, audit_status)
    values (#{id,jdbcType=BIGINT},#{mobilePhone,jdbcType=VARCHAR},#{signPassword,jdbcType=VARCHAR},#{openId,jdbcType=VARCHAR},#{deviceType,jdbcType=INTEGER},#{deviceToken,jdbcType=VARCHAR},#{areaCode,jdbcType=VARCHAR},#{brokerName,jdbcType=VARCHAR},#{uygurBrokerName,jdbcType=VARCHAR},#{workArea,jdbcType=VARCHAR},#{workShop,jdbcType=VARCHAR},#{brokerLevel,jdbcType=INTEGER},#{birthDate,jdbcType=TIMESTAMP},#{identityNumber,jdbcType=VARCHAR},#{homeAddress,jdbcType=VARCHAR},#{photoUrl,jdbcType=VARCHAR},#{guestNumber,jdbcType=INTEGER},#{createTime,jdbcType=TIMESTAMP},#{auditStatus,jdbcType=INTEGER})
  </insert>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <insert id="saveSelective" parameterType="com.ztuo.modules.house.entity.EstateBroker" >
    insert into estate_broker
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="mobilePhone != null" >
        mobile_phone,
      </if>
      <if test="signPassword != null" >
        sign_password,
      </if>
      <if test="openId != null" >
        open_id,
      </if>
      <if test="deviceType != null" >
        device_type,
      </if>
      <if test="deviceToken != null" >
        device_token,
      </if>
      <if test="areaCode != null" >
        area_code,
      </if>
      <if test="brokerName != null" >
        broker_name,
      </if>
      <if test="uygurBrokerName != null" >
        uygur_broker_name,
      </if>
      <if test="workArea != null" >
        work_area,
      </if>
      <if test="workShop != null" >
        work_shop,
      </if>
      <if test="brokerLevel != null" >
        broker_level,
      </if>
      <if test="birthDate != null" >
        birth_date,
      </if>
      <if test="identityNumber != null" >
        identity_number,
      </if>
      <if test="homeAddress != null" >
        home_address,
      </if>
      <if test="photoUrl != null" >
        photo_url,
      </if>
      <if test="guestNumber != null" >
        guest_number,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="auditStatus != null" >
        audit_status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="mobilePhone != null" >
        #{mobilePhone,jdbcType=VARCHAR},
      </if>
      <if test="signPassword != null" >
        #{signPassword,jdbcType=VARCHAR},
      </if>
      <if test="openId != null" >
        #{openId,jdbcType=VARCHAR},
      </if>
      <if test="deviceType != null" >
        #{deviceType,jdbcType=INTEGER},
      </if>
      <if test="deviceToken != null" >
        #{deviceToken,jdbcType=VARCHAR},
      </if>
      <if test="areaCode != null" >
        #{areaCode,jdbcType=VARCHAR},
      </if>
      <if test="brokerName != null" >
        #{brokerName,jdbcType=VARCHAR},
      </if>
      <if test="uygurBrokerName != null" >
        #{uygurBrokerName,jdbcType=VARCHAR},
      </if>
      <if test="workArea != null" >
        #{workArea,jdbcType=VARCHAR},
      </if>
      <if test="workShop != null" >
        #{workShop,jdbcType=VARCHAR},
      </if>
      <if test="brokerLevel != null" >
        #{brokerLevel,jdbcType=INTEGER},
      </if>
      <if test="birthDate != null" >
        #{birthDate,jdbcType=TIMESTAMP},
      </if>
      <if test="identityNumber != null" >
        #{identityNumber,jdbcType=VARCHAR},
      </if>
      <if test="homeAddress != null" >
        #{homeAddress,jdbcType=VARCHAR},
      </if>
      <if test="photoUrl != null" >
        #{photoUrl,jdbcType=VARCHAR},
      </if>
      <if test="guestNumber != null" >
        #{guestNumber,jdbcType=INTEGER},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditStatus != null" >
        #{auditStatus,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <select id="countByExample" parameterType="com.ztuo.modules.house.entity.EstateBrokerExample" resultType="java.lang.Integer" >
    select count(*) from estate_broker
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <update id="updateByExampleSelective" parameterType="map" >
    update estate_broker
    <set>
      <if test="record.id != null" >
        id = #{record.id,jdbcType=BIGINT},
      </if>
      <if test="record.mobilePhone != null" >
        mobile_phone = #{record.mobilePhone,jdbcType=VARCHAR},
      </if>
      <if test="record.signPassword != null" >
        sign_password = #{record.signPassword,jdbcType=VARCHAR},
      </if>
      <if test="record.openId != null" >
        open_id = #{record.openId,jdbcType=VARCHAR},
      </if>
      <if test="record.deviceType != null" >
        device_type = #{record.deviceType,jdbcType=INTEGER},
      </if>
      <if test="record.deviceToken != null" >
        device_token = #{record.deviceToken,jdbcType=VARCHAR},
      </if>
      <if test="record.areaCode != null" >
        area_code = #{record.areaCode,jdbcType=VARCHAR},
      </if>
      <if test="record.brokerName != null" >
        broker_name = #{record.brokerName,jdbcType=VARCHAR},
      </if>
      <if test="record.uygurBrokerName != null" >
        uygur_broker_name = #{record.uygurBrokerName,jdbcType=VARCHAR},
      </if>
      <if test="record.workArea != null" >
        work_area = #{record.workArea,jdbcType=VARCHAR},
      </if>
      <if test="record.workShop != null" >
        work_shop = #{record.workShop,jdbcType=VARCHAR},
      </if>
      <if test="record.brokerLevel != null" >
        broker_level = #{record.brokerLevel,jdbcType=INTEGER},
      </if>
      <if test="record.birthDate != null" >
        birth_date = #{record.birthDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.identityNumber != null" >
        identity_number = #{record.identityNumber,jdbcType=VARCHAR},
      </if>
      <if test="record.homeAddress != null" >
        home_address = #{record.homeAddress,jdbcType=VARCHAR},
      </if>
      <if test="record.photoUrl != null" >
        photo_url = #{record.photoUrl,jdbcType=VARCHAR},
      </if>
      <if test="record.guestNumber != null" >
        guest_number = #{record.guestNumber,jdbcType=INTEGER},
      </if>
      <if test="record.createTime != null" >
        create_time = #{record.createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.auditStatus != null" >
        audit_status = #{record.auditStatus,jdbcType=INTEGER},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <update id="updateByExample" parameterType="map" >
    update estate_broker
    set
      id = #{record.id,jdbcType=BIGINT},
      mobile_phone = #{record.mobilePhone,jdbcType=VARCHAR},
      sign_password = #{record.signPassword,jdbcType=VARCHAR},
      open_id = #{record.openId,jdbcType=VARCHAR},
      device_type = #{record.deviceType,jdbcType=INTEGER},
      device_token = #{record.deviceToken,jdbcType=VARCHAR},
      area_code = #{record.areaCode,jdbcType=VARCHAR},
      broker_name = #{record.brokerName,jdbcType=VARCHAR},
      uygur_broker_name = #{record.uygurBrokerName,jdbcType=VARCHAR},
      work_area = #{record.workArea,jdbcType=VARCHAR},
      work_shop = #{record.workShop,jdbcType=VARCHAR},
      broker_level = #{record.brokerLevel,jdbcType=INTEGER},
      birth_date = #{record.birthDate,jdbcType=TIMESTAMP},
      identity_number = #{record.identityNumber,jdbcType=VARCHAR},
      home_address = #{record.homeAddress,jdbcType=VARCHAR},
      photo_url = #{record.photoUrl,jdbcType=VARCHAR},
      guest_number = #{record.guestNumber,jdbcType=INTEGER},
      create_time = #{record.createTime,jdbcType=TIMESTAMP},
      audit_status = #{record.auditStatus,jdbcType=INTEGER}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <update id="updateByPrimaryKeySelective" parameterType="com.ztuo.modules.house.entity.EstateBroker" >
    update estate_broker
    <set >
      <if test="mobilePhone != null" >
        mobile_phone = #{mobilePhone,jdbcType=VARCHAR},
      </if>
      <if test="signPassword != null" >
        sign_password = #{signPassword,jdbcType=VARCHAR},
      </if>
      <if test="openId != null" >
        open_id = #{openId,jdbcType=VARCHAR},
      </if>
      <if test="deviceType != null" >
        device_type = #{deviceType,jdbcType=INTEGER},
      </if>
      <if test="deviceToken != null" >
        device_token = #{deviceToken,jdbcType=VARCHAR},
      </if>
      <if test="areaCode != null" >
        area_code = #{areaCode,jdbcType=VARCHAR},
      </if>
      <if test="brokerName != null" >
        broker_name = #{brokerName,jdbcType=VARCHAR},
      </if>
      <if test="uygurBrokerName != null" >
        uygur_broker_name = #{uygurBrokerName,jdbcType=VARCHAR},
      </if>
      <if test="workArea != null" >
        work_area = #{workArea,jdbcType=VARCHAR},
      </if>
      <if test="workShop != null" >
        work_shop = #{workShop,jdbcType=VARCHAR},
      </if>
      <if test="brokerLevel != null" >
        broker_level = #{brokerLevel,jdbcType=INTEGER},
      </if>
      <if test="birthDate != null" >
        birth_date = #{birthDate,jdbcType=TIMESTAMP},
      </if>
      <if test="identityNumber != null" >
        identity_number = #{identityNumber,jdbcType=VARCHAR},
      </if>
      <if test="homeAddress != null" >
        home_address = #{homeAddress,jdbcType=VARCHAR},
      </if>
      <if test="photoUrl != null" >
        photo_url = #{photoUrl,jdbcType=VARCHAR},
      </if>
      <if test="guestNumber != null" >
        guest_number = #{guestNumber,jdbcType=INTEGER},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditStatus != null" >
        audit_status = #{auditStatus,jdbcType=INTEGER},
      </if>
    </set>
    where 
      id = #{id,jdbcType=BIGINT}
  </update>
  
  <!-- This element is automatically generated by IDE Plugin, do not modify. -->
  <update id="updateByPrimaryKey" parameterType="com.ztuo.modules.house.entity.EstateBroker" >
    update estate_broker
    set 
      mobile_phone = #{mobilePhone,jdbcType=VARCHAR},
      sign_password = #{signPassword,jdbcType=VARCHAR},
      open_id = #{openId,jdbcType=VARCHAR},
      device_type = #{deviceType,jdbcType=INTEGER},
      device_token = #{deviceToken,jdbcType=VARCHAR},
      area_code = #{areaCode,jdbcType=VARCHAR},
      broker_name = #{brokerName,jdbcType=VARCHAR},
      uygur_broker_name = #{uygurBrokerName,jdbcType=VARCHAR},
      work_area = #{workArea,jdbcType=VARCHAR},
      work_shop = #{workShop,jdbcType=VARCHAR},
      broker_level = #{brokerLevel,jdbcType=INTEGER},
      birth_date = #{birthDate,jdbcType=TIMESTAMP},
      identity_number = #{identityNumber,jdbcType=VARCHAR},
      home_address = #{homeAddress,jdbcType=VARCHAR},
      photo_url = #{photoUrl,jdbcType=VARCHAR},
      guest_number = #{guestNumber,jdbcType=INTEGER},
      create_time = #{createTime,jdbcType=TIMESTAMP},
	  audit_status = #{auditStatus,jdbcType=INTEGER}
    where
      id = #{id,jdbcType=BIGINT}
  </update>


  <select id="pageQueryByExample" resultMap="BaseResultMap" parameterType="com.ztuo.modules.house.entity.EstateBrokerExample" >
    select
    <if test="example.distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from estate_broker
    <if test="_parameter != null" >
      <include refid="Page_Example_Where_Clause" />
    </if>
    <if test="example.orderByClause != null" >
      order by ${example.orderByClause}
    </if>
  </select>

  <sql id="Page_Example_Where_Clause" >
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>


  <select id="getBrokerByPhone" resultMap="BaseResultMap" parameterType="java.lang.String">
    select
    <include refid="Base_Column_List"/>
    from estate_broker where mobile_phone = #{mobilePhone, jdbcType=VARCHAR}
  </select>

  <select id="getBrokerByPhoneAndStatus" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from estate_broker where mobile_phone = #{mobilePhone, jdbcType=VARCHAR}
    and audit_status = #{auditStatus, jdbcType=INTEGER}
  </select>

  <select id="getUncheckedCount" resultType="java.lang.Integer">
    SELECT COUNT(id) FROM estate_broker WHERE audit_status = 0
  </select>

</mapper>